<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <form>
      <label>phone number:</label><br />
      <input type="text" /><br />
      <label>message:</label><br />
      <textarea rows="20" cols="100" id="userMessage"></textarea><br />
      <button type="button" onclick="sendMessage()">send</button>
    </form>
    <script>
      let message = document.querySelector("#userMessage");
      let Body = { data: message.value };
      let myHeader = new Headers({ "Content-Type": "application/json" });
      const request = new Request("http://localhost:3000/conversation", {
        method: "POST",
        body: JSON.stringify({message: message.value}),
        headers: myHeader,
      });

      function sendMessage() {
        fetch(request)
          .then(function resolvedPromise(res) {
            return res.json();
          })
          .then(function getData(data) {
            console.log(data.confirm);
          })
          .catch(function unresolvedPromise(err) {
            console.log(err);
          });
        // .then(function getRes(res) {
        //   return res.json();
        // })
        // .then(function parsedRes(data) {
        //   // const body = JSON.parse(data);
        //   // const body = data;
        //   console.log(`${data.body}`);
        // });
      }
    </script>
  </body>
</html>
